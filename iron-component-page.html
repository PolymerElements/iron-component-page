<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-doc-viewer/iron-doc-viewer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<!--
Renders documentation describing an element's API.

`iron-doc-element` renders element descriptions as extracted by
[Hydrolysis](https://github.com/PolymerLabs/hydrolysis). You can provide them
either via binding...

    <iron-doc-page descriptor="{{elementDescriptor}}"></iron-doc-page>

...or by placing the element descriptor in JSON as the text content of a
`iron-doc-page`:

    <iron-doc-page>
      {
        "is": "awesome-sauce",
        "properties": [
          {"name": "isAwesome", "type": "boolean", "desc": "Is it awesome?"},
        ]
      }
    </iron-doc-page>

However, be aware that due to current limitations in Polymer 0.8, _changes_ to
the text content will not be respected, only the initial value will be loaded.
If you wish to update the documented element, please set it via the `descriptor`
property.
-->
<dom-module id="iron-component-page">

  <style>
    :host {
      position: absolute;
      top: 0;
      right: 0;
      height: 100vh;
      left: 0;
      box-sizing: border-box;
      mixin(--layout-vertical);
      font-family: sans-serif;
    }
    [header] {
      padding: 0 8px;
      border-bottom: 1px solid #bbb;
    }
    [columns] {
      mixin(--layout-horizontal);
      mixin(--layout-flex);
    }
    [docs] {
      padding: 16px;
      background-color: #eeeeee;
      border-right: 1px solid #bbb;
      mixin(--layout-flex-1);
    }
    [demo] {
      mixin(--layout-flex-3);
    }
    iframe {
      border: none;
    }
  </style>

  <template>

    <div header>
      <h1>{{moduleName}}</h1>
    </div>

    <div columns>

      <div docs>
        <iron-doc-viewer nodemo src="{{_docUrl}}"></iron-doc-viewer>
      </div>

      <iframe demo src="{{_demoUrl}}"></iframe>

    </div>

  </template>

  <script>

    Polymer({

      enableCustomStyleProperties: true,

      properties: {

        moduleName: {
          observer: '_moduleNameChanged'
        },

        _demoUrl: {
          value: 'demo'
        }

      },

      ready: function() {
        this.moduleName = this.moduleName || this._findModuleName();
      },

      _findModuleName: function() {
        var path = location.pathname.split('/');
        var name = path.pop() || path.pop();
        if (name.indexOf('.html') >= 0) {
          name = path.pop();
        }
        return name || '';
      },

      _moduleNameChanged: function(moduleName) {
        document.title = moduleName;
        this._docUrl = moduleName + '.html';
      }

    });

  </script>

</dom-module>

